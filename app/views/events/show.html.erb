<div class='event-show-container'>
  <h1 class='event-show-title'> <%= @event.title %></h1>
  Date: <%= @event.date.strftime('%m/%d/%Y') %><br>
  Time: <%= @event.time.strftime('%I:%M %p') %><br>
  Location: <%= @event.location %><br>
  Summary: <%= @event.summary %><br><br>
  Coordinator: <%= @event.owner.full_name %><br>
  <% if @event.owner == current_user %>
    <%= link_to 'Edit Event', edit_event_path %>
    <%= link_to 'Delete Event', event_path, method: :delete, data: {
      confirm: "Are you sure you want to delete this event?"
      } %>
  <% end %>



  <% if !@event.tag_list.empty? %>
    <div>
      <strong>Categories:</strong> <%= safe_join(@event.tag_list.map { |tag| link_to(tag, tag_path(Tag.find_by(name: tag))) }, ", ".html_safe) %>
    </div>
  <% end %>

  <% if !@event.projects.empty? %>
      <h3>Related Projects</h3>

      <% @event.projects.each do |project| %>
        <div class='event-project-title'>
          <%= link_to project.title, project %>
        </div>
      <% end %>
    </div>
  <% end %>

  <div class="list-event-attendees">
    <h3>Attendees:</h3>
    <% @event.attendances.each do |attendance| %>
    <% if defined? attendance %>
        <% attendee = attendance.attendee %>
      <% elsif defined? @attendance %>
        <%= @attendance %>
        <% attendee = @attendance.attendee %>
      <% end %>
      <% if attendee.id == session[:user_id] %>
        <strong><%= attendee.first_name %> <%= attendee.last_name %></strong>
      <% else %>
        <%= attendee.first_name %> <%= attendee.last_name %>
      <% end %>
      <br />
    <% end %>
  </div>

  <div class="attend-event-button">
    <% if user_signed_in? && !@event.attendees.include?(current_user) %>
      <% @attendance = Attendance.new %>
      <%= form_for([@event, @attendance], remote: true) do |f| %>
        <%= f.submit 'Attend this event' %>
      <% end %>
    <% end %>
  </div>

</div>
